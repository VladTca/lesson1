import React, {useEffect, useState} from "react";
import MyButton from "../../components/myButton/MyButton";
import Feedback from "../../components/feedback/Feedback"


export default function Lesson08() {
    // ! –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    // –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ 2 —Å–ª—É—á–∞—è—Ö:

    // 1. –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ
    // 2. –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ props –¥–∞–Ω–Ω—ã—Ö —Ç–∞–∫–∂–µ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ

    // * –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–∏—Å–∞–Ω –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –µ—â–µ —Ä–∞–∑

    const [value, setValue] = useState(42);

    const handleIncrease = () => setValue(prev => prev + 1);

    console.log('update!');

    // ! —Ä–∞–±–æ—Ç–∞ —Å fetch –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

    const [dog, setDog] = useState<string>("#");

    //  * useEffect - —Ö—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω—É—Ç—Ä–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ react –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

    // —á–∞—Å—Ç–∞—è –∑–∞–¥–∞—á–∞: –Ω—É–∂–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è - –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

    // * useEffect - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

    // 1. —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –∂–µ–ª–∞–µ–º—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
    // 2. –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤—ã–∑–æ–≤—É —Ñ—É–Ω–∫—Ü–∏–∏

    useEffect(() => {
        fetch('https://dog.ceo/api/breeds/image/random')
            .then(res => res.json())
            .then(data => setDog(data.message));
    }, [value]);

    // –≤ –º–∞—Å—Å–∏–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö useEffect —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –µ—â–µ —Ä–∞–∑

    // –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

    // ! useEffect + life cycle practice

    const [toggle, setToggle] = useState(false)

    const handleToggle = () => {
        setToggle(prev => !prev)
    }

    return (
        <div>
            <h1>Lesson 8: UseEffect hook ü™ù</h1>
            <div>
                <MyButton func={handleIncrease} text="increase value & change dog" />
            </div>
            <h2>{value}</h2>
            <h2>–†–∞–±–æ—Ç–∞ —Å fetch –≤–Ω—É—Ç—Ä–∏ react –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚¨á</h2>
            <img width={200} src={dog} alt="" />

            <h2>–ü—Ä–∞–∫—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å useEffect –≤–Ω—É—Ç—Ä–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ ‚¨á</h2>

            {/* –µ—Å–ª–∏ —Ö–æ—Ç–∏–º –ø–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è true / false –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π - –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª && */}
            <MyButton func={handleToggle} text={`${toggle ? 'hide' : 'show'} feedback`}/>
            {toggle && <Feedback/>}


        </div>
    );
}